<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Users</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/user.css">
</head>
<body>
<div class="account-page-layout">
    <th:block th:insert="~{/fragment/general :: nav-bar}"></th:block>
    <div class="account-overview">
        <h1>Users</h1>
        <div class="table-nav">
            <a th:href="@{/users/add}">Add new User</a>
            <a th:href="@{/users/history}">History</a>
        </div>
        <table>
            <thead>
            <tr>
                <th>Actions</th>
                <th>Full Name</th>
                <th>Email</th>
                <th>Country</th>
                <th>Department</th>
                <th>Position</th>
                <th>Manager</th>
                <th>Card</th>
                <th>Status</th>
                <th>UpdatedOn</th>
                <th>LeftOn</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="user : ${users}" th:if="${user.firstName != 'admin'}">
                <td><a th:href="@{'/users/edit/' + ${user.id}}">Edit</a></td>
                <td th:text="${user.firstName + ' ' + user.lastName}"></td>
                <td th:text="${user.corporateEmail}"></td>
                <td th:text="${user.country}"></td>
                <td th:text="${user.department}"></td>
                <td th:text="${user.position}"></td>
                <td th:text="${user.manager?.id == null ? 'none' : user.manager.firstName + ' ' + user.manager.lastName}"></td>
                <td th:text="${user.card?.id == null} ? 'none' : ${user.card.id}"></td>
                <td th:text="${user.active == true ? 'Active' : 'Deactivated'}"></td>
                <td th:text="${user.updatedOn}"></td>
                <td th:text="${user.leftOn}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<footer th:replace="~{fragment/general :: footer}"></footer>
</body>
</html>